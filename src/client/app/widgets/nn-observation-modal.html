<div class="overlay-partial">

  <div class="nn-modal -center" ng-click="$event.stopPropagation()">

    <header class="nn-modal__header">
      <nn-badge
        class="nn-badge detail__user"
        title="{{$root.users[observation.observer].display_name}}" subtitle="{{formatDate(observation.updated_at)}}"
        avatar-url="{{avatarUrl}}">
      </nn-badge>
      <a class="nn-modal__close" href="#" ng-click="hide()"></a>
    </header>

    <div class="detail">

      <div class="detail__description" ng-if="observation.data.text">{{observation.data.text}}</div>

      <img class="detail__image" src="{{observation.data.image | img_large }}" ng-if="observation.data.image"></img>

      <nn-social-totals class="totals detail__totals" data="observation" context="observations" show-dislikes="false"></nn-social-totals>
      <a ng-if="!!observation.data.image" ng-href="{{observation.data.image}}" target="_new">Download Image</a>
      <a ng-if="!!observation.data.doc" ng-href="{{observation.data.doc}}" target="_new">Download Document</a>

      <section class="detail__comments">

        <nn-comment class="comment detail__comment" ng-repeat="c in comments | orderBy: 'updated_at'"
          name="{{$root.users[c.commenter].display_name}}"
          date="{{c.updated_at}}"
          avatar-url="{{$root.users[c.commenter].avatar}}"
          comment="{{c.comment}}">
        </nn-comment>

        <nn-comment-form class="nn-badge comment list-item__comment"
          data="observation"
          context="observations">
        </nn-comment-form>

      </section>
    </div>

  </div>
</div>